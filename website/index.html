<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hyper-Local Pest Infestation Forecaster</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/leaflet.heat@0.4.0/dist/leaflet-heat.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <h1>Hyper-Local Pest Infestation Forecaster</h1>
                <p>AI-Powered Agricultural Pest Prediction System</p>
                <div class="header-badges">
                    <span class="status status--success">ResNet Ready</span>
                    <span class="status status--success">ConvLSTM Ready</span>
                    <span class="status status--info">Live Data</span>
                </div>
            </div>
        </header>

        <div class="main-layout">
            <!-- Sidebar -->
            <aside class="sidebar">
                <!-- Upload Section -->
                <div class="card upload-section">
                    <div class="card__header">
                        <h3>Drone Image Upload</h3>
                    </div>
                    <div class="card__body">
                        <div class="upload-area" id="uploadArea">
                            <div class="upload-content">
                                <div class="upload-icon">üì∑</div>
                                <p>Drop drone image here or click to browse</p>
                                <p class="upload-hint">Supports JPG, PNG (max 10MB)</p>
                            </div>
                            <input type="file" id="fileInput" accept="image/*" hidden>
                        </div>
                        
                        <!-- Sample Images -->
                        <div class="sample-images">
                            <h4>Sample Images</h4>
                            <div class="sample-grid" id="sampleGrid"></div>
                        </div>

                        <!-- Selected Image Info -->
                        <div class="image-info hidden" id="imageInfo">
                            <h4>Selected Image</h4>
                            <div class="info-item">
                                <span class="label">Name:</span>
                                <span class="value" id="imageName"></span>
                            </div>
                            <div class="info-item">
                                <span class="label">Area:</span>
                                <span class="value" id="imageArea"></span>
                            </div>
                            <div class="info-item">
                                <span class="label">Initial Pest Level:</span>
                                <span class="value" id="imagePestLevel"></span>
                            </div>
                        </div>

                        <button class="btn btn--primary btn--full-width" id="generateForecast">
                            Generate Forecast
                        </button>
                    </div>
                </div>

                <!-- AI Models Status -->
                <div class="card">
                    <div class="card__header">
                        <h3>AI Models</h3>
                    </div>
                    <div class="card__body">
                        <div class="model-item">
                            <div class="model-header">
                                <h4>ResNet-50 Disease Detector</h4>
                                <span class="status status--success">Ready</span>
                            </div>
                            <div class="model-details">
                                <p>Accuracy: <strong>96.7%</strong></p>
                                <p>Dataset: Plant Disease (87k images)</p>
                            </div>
                        </div>
                        
                        <div class="model-item">
                            <div class="model-header">
                                <h4>ConvLSTM Forecaster</h4>
                                <span class="status status--success">Ready</span>
                            </div>
                            <div class="model-details">
                                <p>Accuracy: <strong>89.4%</strong></p>
                                <p>Dataset: Synthetic Pest Spread (5k sequences)</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Data Sources -->
                <div class="card">
                    <div class="card__header">
                        <h3>Data Sources</h3>
                    </div>
                    <div class="card__body">
                        <div class="data-source">
                            <h4>üõ∞Ô∏è Sentinel-2 Satellite</h4>
                            <p>Resolution: 10m | Bands: Red, NIR, Blue, Green</p>
                            <p class="data-status">Last Update: Jan 1, 2024</p>
                        </div>
                        <div class="data-source">
                            <h4>üå§Ô∏è Open-Meteo Weather</h4>
                            <p>Parameters: Temperature, Wind, Humidity</p>
                            <p class="data-status">Update: Hourly | Forecast: 7 days</p>
                        </div>
                    </div>
                </div>
            </aside>

            <!-- Main Content -->
            <main class="main-content">
                <!-- Map Container -->
                <div class="map-container">
                    <div class="map-header">
                        <h2>Pest Risk Forecast Map</h2>
                        <div class="map-controls">
                            <div class="forecast-days">
                                <button class="day-btn active" data-day="1">Day 1</button>
                                <button class="day-btn" data-day="2">Day 2</button>
                                <button class="day-btn" data-day="3">Day 3</button>
                            </div>
                            <div class="map-layers">
                                <label class="layer-toggle">
                                    <input type="checkbox" id="heatmapToggle" checked>
                                    <span>Pest Risk Heatmap</span>
                                </label>
                            </div>
                        </div>
                    </div>
                    <div id="map" class="map"></div>
                    <div class="map-legend">
                        <h4>Risk Level</h4>
                        <div class="legend-items">
                            <div class="legend-item">
                                <div class="legend-color" style="background: #ff0000;"></div>
                                <span>High (>70%)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #ff8800;"></div>
                                <span>Medium (30-70%)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #00ff00;"></div>
                                <span>Low (<30%)</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Forecast Panel -->
                <div class="forecast-panel">
                    <div class="forecast-header">
                        <h2>3-Day Pest Forecast</h2>
                        <div class="current-selection">
                            <span>Selected: </span>
                            <span id="selectedDay">Day 1</span>
                            <span class="risk-indicator" id="riskIndicator"></span>
                        </div>
                    </div>

                    <div class="forecast-content">
                        <!-- Forecast Cards -->
                        <div class="forecast-cards" id="forecastCards"></div>

                        <!-- Charts Section -->
                        <div class="charts-section">
                            <div class="chart-container" style="position: relative; height: 300px;">
                                <canvas id="trendChart"></canvas>
                            </div>
                        </div>

                        <!-- Recommendations -->
                        <div class="recommendations" id="recommendations">
                            <h3>Recommendations for <span id="recDay">Day 1</span></h3>
                            <ul id="recList"></ul>
                        </div>
                    </div>
                </div>
            </main>
        </div>

        <!-- Processing Modal -->
        <div class="modal hidden" id="processingModal">
            <div class="modal-overlay"></div>
            <div class="modal-content">
                <div class="processing-content">
                    <div class="processing-spinner"></div>
                    <h3>Processing Image...</h3>
                    <p id="processingStatus">Initializing ResNet disease detection...</p>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Educational Modal -->
        <div class="modal hidden" id="infoModal">
            <div class="modal-overlay" onclick="closeModal('infoModal')"></div>
            <div class="modal-content">
                <div class="modal-header">
                    <h3>How It Works</h3>
                    <button class="modal-close" onclick="closeModal('infoModal')">√ó</button>
                </div>
                <div class="modal-body">
                    <div class="info-section">
                        <h4>üß† AI Models</h4>
                        <p><strong>ResNet-50:</strong> Detects plant diseases and pest damage from drone imagery using deep convolutional neural networks.</p>
                        <p><strong>ConvLSTM:</strong> Predicts spatiotemporal pest spread patterns by analyzing sequences of environmental and crop health data.</p>
                    </div>
                    <div class="info-section">
                        <h4>üì° Data Integration</h4>
                        <p><strong>Sentinel-2:</strong> Provides high-resolution satellite imagery for NDVI calculation and crop health monitoring.</p>
                        <p><strong>Weather Data:</strong> Real-time weather conditions influence pest movement and reproduction patterns.</p>
                    </div>
                    <div class="info-section">
                        <h4>üéØ Forecasting Process</h4>
                        <ol>
                            <li>Drone image analysis for initial pest detection</li>
                            <li>Environmental data integration (weather, satellite)</li>
                            <li>Spatiotemporal modeling with ConvLSTM</li>
                            <li>Risk assessment and recommendation generation</li>
                        </ol>
                    </div>
                </div>
            </div>
        </div>

        <!-- Info Button -->
        <button class="info-btn" onclick="openModal('infoModal')" title="How it works">
            ?
        </button>
    </div>

    <script src="app.js"></script>
</body>
</html>